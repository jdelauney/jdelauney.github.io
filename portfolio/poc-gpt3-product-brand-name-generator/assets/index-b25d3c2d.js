(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();const u=document.querySelector("form"),s=document.querySelector("button"),c=document.querySelector("article > footer"),a=()=>{s.setAttribute("aria-busy","true"),s.disabled=!0,c.textContent="Génération des noms en cours",c.setAttribute("aria-busy","true")},m=()=>{c.setAttribute("aria-busy","false"),s.setAttribute("aria-busy","false"),s.disabled=!1},d=t=>`Génère-moi ${t.numberOfProposals} idées de nom ${t.genre} pour ${t.type} avec comme thème ${t.theme}`,f=(t,e,i=0)=>{const n=t.indexOf(e,i);return n>=t.length-1?"":t.slice(n+1,t.length)},p=t=>t.split(`
`).map(e=>{if(e.trim().length>1)return`<li>${f(e,".")}</li>`}).join(""),g=t=>{a(),fetch("https://api.openai.com/v1/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.apiKey}`},body:JSON.stringify({prompt:d(t),max_tokens:256,model:"text-davinci-003"})}).then(e=>e.json()).then(e=>{c.innerHTML=`<h2><b>Propositions</b>&nbsp;:</h2>  <ol>${p(e.choices[0].text)}</ol>`}).finally(()=>{m()})};u.addEventListener("submit",t=>{var n;t.preventDefault();const e=new FormData(u),i={apiKey:e.get("apikey").toString().trim(),type:e.get("typeName").toString().trim(),theme:e.get("theme").toString().trim(),genre:e.getAll("genre").join(", "),numberOfProposals:Number((n=e.get("num"))==null?void 0:n.toString())};g(i)});
